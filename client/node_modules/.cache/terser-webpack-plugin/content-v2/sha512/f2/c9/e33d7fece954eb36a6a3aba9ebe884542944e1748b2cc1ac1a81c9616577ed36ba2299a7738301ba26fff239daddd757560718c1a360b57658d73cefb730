{"code":"(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{106:function(e,t,c){\"use strict\";c.r(t);var a=c(0),n=c(31),r=c.n(n),s=(c(48),c(107)),i=c(5);function o(){return Object(i.jsx)(s.a,{style:{minHeight:\"100vh\"},className:\"d-flex justify-content-+center align-items-center\",children:Object(i.jsx)(\"a\",{className:\"btn btn-success btn-lg\",href:\"https://accounts.spotify.com/authorize?client_id=250a9153ab334c6cba6723476cf799eb&response_type=code&redirect_uri=http://localhost:3000&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state\",children:\"Log In With Spotify\"})})}var u=c(7),l=c(108),f=c(8),b=c.n(f);var h=c(32),j=c.n(h);function d(e){return Object(i.jsxs)(\"div\",{className:\"d-flex m-2 align-items-center\",style:{cursor:\"pointer\"},onClick:function(){e.chooseTrack(e.track)},children:[Object(i.jsx)(\"img\",{src:e.track.albumURL,style:{height:\"64px\"},alt:\"\"}),Object(i.jsxs)(\"div\",{className:\"ml-3\",children:[Object(i.jsx)(\"div\",{children:e.track.title}),Object(i.jsx)(\"div\",{className:\"text-muted\",children:e.track.artist})]})]})}var O=c(41);function m(e){var t=e.accessToken,c=e.trackUri,n=Object(a.useState)(!1),r=Object(u.a)(n,2),s=r[0],o=r[1];return Object(a.useEffect)((function(){c&&o(!0)}),[c]),t?Object(i.jsx)(O.a,{token:t,callback:function(e){e.isPlaying||o(!1)},showSaveIcon:!0,play:s,uris:c?[c]:[]}):null}var p=new j.a({clientId:\"250a9153ab334c6cba6723476cf799eb\"});function v(e){var t=function(e){var t=Object(a.useState)(),c=Object(u.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(),i=Object(u.a)(s,2),o=i[0],l=i[1],f=Object(a.useState)(),h=Object(u.a)(f,2),j=h[0],d=h[1];return Object(a.useEffect)((function(){b.a.post(\"http://localhost:3001/login\",{code:e}).then((function(e){r(e.data.accessToken),l(e.data.refreshToken),d(e.data.expiresIn),window.history.pushState({},null,\"/\")})).catch((function(e){window.location=\"/\"}))}),[e]),Object(a.useEffect)((function(){if(o&&j){var e=setInterval((function(){b.a.post(\"http://localhost:3001/refresh\",{refreshToken:o}).then((function(e){r(e.data.accessToken),d(e.data.expiresIn)})).catch((function(e){window.location=\"/\"}))}),1e3*(j-60));return function(){return clearInterval(e)}}}),[o,j]),n}(e.code),c=Object(a.useState)(\"\"),n=Object(u.a)(c,2),r=n[0],o=n[1],f=Object(a.useState)([]),h=Object(u.a)(f,2),j=h[0],O=h[1],v=Object(a.useState)(),x=Object(u.a)(v,2),k=x[0],y=x[1],g=Object(a.useState)(\"\"),w=Object(u.a)(g,2),S=w[0],T=w[1];function I(e){y(e),O([]),T(\"\")}return Object(a.useEffect)((function(){k&&b.a.get(\"http://localhost:3001/lyrics\",{params:{track:k.title,artist:k.artist}}).then((function(e){T(e.data.lyrics)}))}),[k]),Object(a.useEffect)((function(){t&&p.setAccessToken(t)}),[t]),Object(a.useEffect)((function(){if(!r)return O([]);if(t){var e=!1;return p.searchTracks(r).then((function(t){e||O(t.body.tracks.items.map((function(e){var t=e.album.images.reduce((function(e,t){return t.height<e.height?t:e}),e.album.images[0]);return{artist:e.artists[0].name,title:e.name,uri:e.uri,albumURL:t.url}})))})),function(){return e=!0}}}),[r,t]),Object(i.jsxs)(s.a,{className:\"d-flex flex-column py-2\",style:{height:\"100vh\"},children:[Object(i.jsx)(l.a.Control,{type:\"search\",placeholder:\"Search Songs/Artists\",value:r,onChange:function(e){o(e.target.value)}}),Object(i.jsxs)(\"div\",{className:\"flex-grow-1 my-2\",style:{overflowY:\"auto\"},children:[j.map((function(e){return Object(i.jsx)(d,{track:e,chooseTrack:I},e.uri)})),0===j.length&&Object(i.jsx)(\"div\",{className:\"text-center\",style:{whiteSpace:\"pre\"},children:S})]}),Object(i.jsx)(\"div\",{children:Object(i.jsx)(m,{accessToken:t,trackUri:null===k||void 0===k?void 0:k.uri})})]})}var x=new URLSearchParams(window.location.search).get(\"code\");var k=function(){return x?Object(i.jsx)(v,{code:x}):Object(i.jsx)(o,{})};r.a.render(Object(i.jsx)(k,{}),document.getElementById(\"root\"))},85:function(e,t){}},[[106,1,2]]]);","name":"static/js/main.87838114.chunk.js","map":{"version":3,"sources":["static/js/main.87838114.chunk.js"],"names":["this","push","106","module","__webpack_exports__","__webpack_require__","r","react","react_dom","react_dom_default","n","Container","jsx_runtime","Login","Object","style","minHeight","className","children","href","slicedToArray","Form","axios","axios_default","client","client_default","TrackSearchResult","props","cursor","onClick","chooseTrack","track","src","albumURL","height","alt","title","artist","esm","Player","_ref","accessToken","trackUri","_useState","_useState2","play","setPlay","token","callback","state","isPlaying","showSaveIcon","uris","SpotifyApi","a","clientId","Dashboard","code","setAccessToken","_useState3","_useState4","refreshToken","setRefreshToken","_useState5","_useState6","expiresIn","setExpiresIn","post","then","res","data","window","history","pushState","catch","err","location","interval","setInterval","clearInterval","useAuth","search","setSearch","searchResults","setSearchResults","playingTrack","setPlayingTrack","_useState7","_useState8","lyrics","setLyrics","get","params","cancel","searchTracks","body","tracks","items","map","smallestAlbumImage","album","images","reduce","smallest","image","artists","name","uri","url","Control","type","placeholder","value","onChange","e","target","overflowY","length","whiteSpace","App_code","URLSearchParams","src_App","render","document","getElementById","85","exports"],"mappings":"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"},"input":"(this[\"webpackJsonpundefined\"] = this[\"webpackJsonpundefined\"] || []).push([[0],{\n\n/***/ 106:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(31);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/bootstrap/dist/css/bootstrap.min.css\nvar bootstrap_min = __webpack_require__(48);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Container.js\nvar Container = __webpack_require__(107);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(5);\n\n// CONCATENATED MODULE: ./src/Login.jsx\nvar AUTH_URL='https://accounts.spotify.com/authorize?client_id=250a9153ab334c6cba6723476cf799eb&response_type=code&redirect_uri=http://localhost:3000&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state';function Login(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Container[\"a\" /* default */],{style:{minHeight:'100vh'},className:\"d-flex justify-content-+center align-items-center\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{className:\"btn btn-success btn-lg\",href:AUTH_URL,children:\"Log In With Spotify\"})});}\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/react-bootstrap/esm/Form.js + 16 modules\nvar Form = __webpack_require__(108);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(8);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./src/useAuth.jsx\nfunction useAuth(code){var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),accessToken=_useState2[0],setAccessToken=_useState2[1];var _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),refreshToken=_useState4[0],setRefreshToken=_useState4[1];var _useState5=Object(react[\"useState\"])(),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),expiresIn=_useState6[0],setExpiresIn=_useState6[1];Object(react[\"useEffect\"])(function(){axios_default.a.post('http://localhost:3001/login',{code:code}).then(function(res){setAccessToken(res.data.accessToken);setRefreshToken(res.data.refreshToken);setExpiresIn(res.data.expiresIn);window.history.pushState({},null,'/');}).catch(function(err){window.location='/';});},[code]);Object(react[\"useEffect\"])(function(){if(!refreshToken||!expiresIn)return;var interval=setInterval(function(){axios_default.a.post('http://localhost:3001/refresh',{refreshToken:refreshToken}).then(function(res){setAccessToken(res.data.accessToken);setExpiresIn(res.data.expiresIn);}).catch(function(err){window.location='/';});},(expiresIn-60)*1000);return function(){return clearInterval(interval);};},[refreshToken,expiresIn]);return accessToken;}\n// EXTERNAL MODULE: ./node_modules/spotify-web-api-node/src/client.js\nvar client = __webpack_require__(32);\nvar client_default = /*#__PURE__*/__webpack_require__.n(client);\n\n// CONCATENATED MODULE: ./src/TrackSearchResult.jsx\nfunction TrackSearchResult(props){function handlePlay(){props.chooseTrack(props.track);}return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"d-flex m-2 align-items-center\",style:{cursor:'pointer'},onClick:handlePlay,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:props.track.albumURL,style:{height:'64px'},alt:\"\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:props.track.title}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"text-muted\",children:props.track.artist})]})]});}\n// EXTERNAL MODULE: ./node_modules/react-spotify-web-playback/esm/index.js + 31 modules\nvar esm = __webpack_require__(41);\n\n// CONCATENATED MODULE: ./src/Player.jsx\nfunction Player(_ref){var accessToken=_ref.accessToken,trackUri=_ref.trackUri;var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),play=_useState2[0],setPlay=_useState2[1];Object(react[\"useEffect\"])(function(){trackUri?setPlay(true):null;},[trackUri]);if(!accessToken)return null;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(esm[\"a\" /* default */],{token:accessToken,callback:function callback(state){if(!state.isPlaying){setPlay(false);}},showSaveIcon:true,play:play,uris:trackUri?[trackUri]:[]});}\n// CONCATENATED MODULE: ./src/Dashboard.jsx\nvar SpotifyApi=new client_default.a({clientId:'250a9153ab334c6cba6723476cf799eb'});function Dashboard(_ref){var code=_ref.code;var accessToken=useAuth(code);var _useState=Object(react[\"useState\"])(''),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=Object(react[\"useState\"])([]),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),searchResults=_useState4[0],setSearchResults=_useState4[1];var _useState5=Object(react[\"useState\"])(),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),playingTrack=_useState6[0],setPlayingTrack=_useState6[1];var _useState7=Object(react[\"useState\"])(''),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),lyrics=_useState8[0],setLyrics=_useState8[1];function chooseTrack(track){setPlayingTrack(track);setSearchResults([]);setLyrics('');}Object(react[\"useEffect\"])(function(){if(!playingTrack)return;axios_default.a.get('http://localhost:3001/lyrics',{params:{track:playingTrack.title,artist:playingTrack.artist}}).then(function(res){setLyrics(res.data.lyrics);});},[playingTrack]);Object(react[\"useEffect\"])(function(){if(!accessToken)return;SpotifyApi.setAccessToken(accessToken);},[accessToken]);Object(react[\"useEffect\"])(function(){if(!search)return setSearchResults([]);if(!accessToken)return;var cancel=false;SpotifyApi.searchTracks(search).then(function(res){if(cancel)return;setSearchResults(res.body.tracks.items.map(function(track){var smallestAlbumImage=track.album.images.reduce(function(smallest,image){if(image.height<smallest.height)return image;return smallest;},track.album.images[0]);return{artist:track.artists[0].name,title:track.name,uri:track.uri,albumURL:smallestAlbumImage.url};}));});return function(){return cancel=true;};},[search,accessToken]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Container[\"a\" /* default */],{className:\"d-flex flex-column py-2\",style:{height:'100vh'},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Form[\"a\" /* default */].Control,{type:\"search\",placeholder:\"Search Songs/Artists\",value:search,onChange:function onChange(e){setSearch(e.target.value);}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"flex-grow-1 my-2\",style:{overflowY:'auto'},children:[searchResults.map(function(track){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TrackSearchResult,{track:track,chooseTrack:chooseTrack},track.uri);}),searchResults.length===0&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"text-center\",style:{whiteSpace:'pre'},children:lyrics})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Player,{accessToken:accessToken,trackUri:playingTrack===null||playingTrack===void 0?void 0:playingTrack.uri})})]});}\n// CONCATENATED MODULE: ./src/App.jsx\nvar App_code=new URLSearchParams(window.location.search).get('code');function App(){return App_code?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Dashboard,{code:App_code}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Login,{});}/* harmony default export */ var src_App = (App);\n// CONCATENATED MODULE: ./src/index.jsx\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{}),document.getElementById('root'));\n\n/***/ }),\n\n/***/ 85:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ })\n\n},[[106,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/apostolosdedeloudis/Documents/GitHub/Spotify-Clone/client/src/Login.jsx","/Users/apostolosdedeloudis/Documents/GitHub/Spotify-Clone/client/src/useAuth.jsx","/Users/apostolosdedeloudis/Documents/GitHub/Spotify-Clone/client/src/TrackSearchResult.jsx","/Users/apostolosdedeloudis/Documents/GitHub/Spotify-Clone/client/src/Player.jsx","/Users/apostolosdedeloudis/Documents/GitHub/Spotify-Clone/client/src/Dashboard.jsx","/Users/apostolosdedeloudis/Documents/GitHub/Spotify-Clone/client/src/App.jsx","/Users/apostolosdedeloudis/Documents/GitHub/Spotify-Clone/client/src/index.jsx","ignored /Users/apostolosdedeloudis/Documents/GitHub/Spotify-Clone/client/node_modules/object-inspect ./util.inspect"],"names":["AUTH_URL","Login","minHeight","useAuth","code","useState","accessToken","setAccessToken","refreshToken","setRefreshToken","expiresIn","setExpiresIn","useEffect","axios","post","then","res","data","window","history","pushState","catch","err","location","interval","setInterval","clearInterval","TrackSearchResult","props","handlePlay","chooseTrack","track","cursor","albumURL","height","title","artist","Player","trackUri","play","setPlay","state","isPlaying","SpotifyApi","SpotifyWebApi","clientId","Dashboard","search","setSearch","searchResults","setSearchResults","playingTrack","setPlayingTrack","lyrics","setLyrics","get","params","cancel","searchTracks","body","tracks","items","map","smallestAlbumImage","album","images","reduce","smallest","image","artists","name","uri","url","e","target","value","overflowY","length","whiteSpace","URLSearchParams","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["import React from 'react'\nimport { Container } from 'react-bootstrap'\n\nconst AUTH_URL = 'https://accounts.spotify.com/authorize?client_id=250a9153ab334c6cba6723476cf799eb&response_type=code&redirect_uri=http://localhost:3000&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state'\n\nexport default function Login() {\n    return (\n        <Container style={{minHeight: '100vh'}} className='d-flex justify-content-+center align-items-center'>\n            <a className=\"btn btn-success btn-lg\" href={AUTH_URL}>Log In With Spotify</a>\n        </Container>\n    )\n}\n","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nexport default function useAuth(code) {\n    const [accessToken, setAccessToken] = useState()\n    const [refreshToken, setRefreshToken] = useState()\n    const [expiresIn, setExpiresIn] = useState()\n\n    useEffect(() => {\n        axios.post('http://localhost:3001/login', { code }).then(res => {\n            setAccessToken(res.data.accessToken)\n            setRefreshToken(res.data.refreshToken)\n            setExpiresIn(res.data.expiresIn)\n            window.history.pushState({}, null, '/')\n        }).catch((err) => {\n            window.location = '/'\n        })\n    }, [code])\n\n    useEffect(() => {\n        if (!refreshToken || !expiresIn) return \n        const interval = setInterval(() => {\n            axios.post('http://localhost:3001/refresh', { refreshToken }).then(res => {\n                setAccessToken(res.data.accessToken)\n                setExpiresIn(res.data.expiresIn)\n            }).catch((err) => {\n                window.location = '/'\n            }) \n        }, (expiresIn - 60) * 1000)\n        return () => clearInterval(interval)\n    }, [refreshToken, expiresIn])\n\n    return accessToken\n}","import React from 'react'\n\nexport default function TrackSearchResult(props) {\n    \n    function handlePlay() {\n        props.chooseTrack(props.track)\n    }\n       \n    return (\n        <div className='d-flex m-2 align-items-center' style={{cursor: 'pointer'}} onClick={handlePlay}>\n            <img src={props.track.albumURL} style={{height: '64px' }} alt='' />\n            <div className='ml-3'>\n                <div>{props.track.title}</div>\n                <div className='text-muted'>{props.track.artist}</div>\n            </div>\n        </div>\n    )\n}\n","import React, {useEffect, useState} from 'react'\nimport SpotifyWebPlayer from 'react-spotify-web-playback'\n\nexport default function Player({accessToken, trackUri}) {\n    const [play, setPlay] = useState(false)\n    \n    useEffect(() => {\n        trackUri ? setPlay(true) : null\n    }, [trackUri])\n    \n    if (!accessToken) return null\n    return <SpotifyWebPlayer token={accessToken} callback = {state => {if (!state.isPlaying) {setPlay(false)}}} showSaveIcon play={play} uris={trackUri ? [trackUri] : []} />\n}","import {useState, useEffect} from 'react'\nimport {Container, Form} from 'react-bootstrap';\nimport useAuth from './useAuth';\nimport SpotifyWebApi from 'spotify-web-api-node'\nimport TrackSearchResult from './TrackSearchResult'\nimport Player from './Player';\nimport axios from 'axios';\n\nconst SpotifyApi = new SpotifyWebApi({\n    clientId: '250a9153ab334c6cba6723476cf799eb'\n})\n\nexport default function Dashboard({ code }) {\n    const accessToken = useAuth(code)\n    const [search, setSearch] = useState('')\n    const [searchResults, setSearchResults] = useState([])\n    const [playingTrack, setPlayingTrack] = useState()\n    const [lyrics, setLyrics] = useState('')\n    \n    function chooseTrack(track) {\n        setPlayingTrack(track)\n        setSearchResults([])\n        setLyrics('')\n    }\n    \n    useEffect(() => {\n        if (!playingTrack) return\n        axios.get('http://localhost:3001/lyrics', {\n            params: {\n                track: playingTrack.title,\n                artist: playingTrack.artist\n            }\n        }).then(res => {\n            setLyrics(res.data.lyrics)\n        })\n    }, [playingTrack])\n    \n    useEffect(() => {\n        if (!accessToken) return\n        SpotifyApi.setAccessToken(accessToken)\n    }, [accessToken])\n    \n    useEffect(() => {\n        if (!search) return setSearchResults([])\n        if (!accessToken) return \n        \n        let cancel = false\n        \n        SpotifyApi.searchTracks(search).then(res => {\n            if (cancel) return \n            setSearchResults(res.body.tracks.items.map(track => {\n                const smallestAlbumImage = track.album.images.reduce((smallest, image) => {\n                    if (image.height < smallest.height) return image\n                    return smallest\n                }, track.album.images[0])\n                return{\n                    artist: track.artists[0].name,\n                    title: track.name,\n                    uri: track.uri,\n                    albumURL: smallestAlbumImage.url\n                    \n                }\n            })\n        )})\n        return () => cancel = true\n    }, [search, accessToken])\n    \n    return (\n            <Container className='d-flex flex-column py-2' style={{height: '100vh'}}>\n                <Form.Control type='search' placeholder='Search Songs/Artists' value={search} onChange={e => {setSearch(e.target.value)}} />\n                <div className='flex-grow-1 my-2' style={{overflowY: 'auto'}}>\n                     {searchResults.map(track => (\n                        <TrackSearchResult\n                            track={track}\n                            key={track.uri}\n                            chooseTrack={chooseTrack}\n                        />\n                     ))}\n                     {searchResults.length === 0 && (\n                        <div className='text-center' style={{whiteSpace: 'pre'}}>{lyrics}</div>\n                     )}\n                </div>\n                <div><Player accessToken={accessToken} trackUri={playingTrack?.uri} /></div>\n            </Container>\n    )\n}","import 'bootstrap/dist/css/bootstrap.min.css'\nimport Login from './Login'\nimport Dashboard from './Dashboard'\n\nconst code = new URLSearchParams(window.location.search).get('code')\n\nfunction App() {\n  return (\n   code ? <Dashboard code={code} /> : <Login />\n  );\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n","/* (ignored) */"]}}